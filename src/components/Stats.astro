---
import { Card } from '@astrojs/starlight/components';

const response = await fetch('https://api.github.com/repos/Nelson-5553/pydocs/contributors');
const contributors = await response.json();
const totalContributors = contributors.length;
const totalCommits = contributors.reduce((sum: any, contributor: { contributions: any }) => sum + contributor.contributions, 0);
---

<div class="mt-10 w-full mx-auto">
  <Card title="">
    <div class="flex flex-wrap justify-center items-stretch gap-8">
      
      <!-- Total Contributors -->
      <div class="flex flex-col justify-center items-center text-center min-w-[120px] max-w-[160px] h-[100px] bg-white dark:bg-[#23232300] rounded-xl transition-colors mt-4 sm:mt-0">
        <div class="text-[2rem] font-bold leading-none text-[#306998] dark:text-[#FFD43B]">
          {totalContributors}+
        </div>
        <div class="text-[#666] dark:text-[#ccc] min-h-[1.5em] flex items-center justify-center">
          Colaboradores
        </div>
      </div>

      <!-- Total Commits -->
      <div class="flex flex-col justify-center items-center text-center min-w-[120px] max-w-[160px] h-[100px] bg-white dark:bg-[#23232300] rounded-xl transition-colors">
        <div class="text-[2rem] font-bold leading-none text-[#306998] dark:text-[#FFD43B]">
          {totalCommits}+
        </div>
        <div class="text-[#666] dark:text-[#ccc] min-h-[1.5em] flex items-center justify-center">
          Commits
        </div>
      </div>

      <!-- Open Source Link -->
      <div class="flex flex-col justify-center items-center text-center min-w-[140px] max-w-[180px] h-[100px] bg-white dark:bg-[#23232300] rounded-xl transition-colors">
        <div class="text-[1.1rem] font-bold leading-none text-[#306998] dark:text-[#FFD43B]">
          Open Source
        </div>
        <div class="min-h-[1.5em] flex items-center justify-center">
          <a
            href="https://github.com/Nelson-5553/pydocs"
            target="_blank"
            class="text-[#306998] dark:text-[#FFD43B] underline text-[0.97em] font-medium mt-1 transition-colors hover:opacity-80"
          >
            Â¡Colabora en GitHub!
          </a>
        </div>
      </div>

    </div>
  </Card>
</div>
